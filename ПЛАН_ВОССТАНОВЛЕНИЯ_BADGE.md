# üéØ –ü–õ–ê–ù –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø BADGE –ö–û–†–ó–ò–ù–´

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –≤—Å–µ—Ö –º–æ–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π badge –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è  
**–ü—Ä–∏—á–∏–Ω–∞:** –Ø –¥–æ–±–∞–≤–∏–ª –ö–û–°–¢–´–õ–ò –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º WooCommerce

---

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑–∞–ª–∞:

**Desktop:**
- Badge –Ω–∞–π–¥–µ–Ω: `.w-cart-quantity`
- –ó–Ω–∞—á–µ–Ω–∏–µ: "0"
- Display: `none` (–∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è)
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø—É—Å—Ç–∞—è - —ç—Ç–æ –ü–†–ê–í–ò–õ–¨–ù–û

**Mobile:**
- –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é: "–ö–æ—Ä–∑–∏–Ω–∞ 0" - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç
- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å: –ú–û–ô `.mobile-cart-badge` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "0"
- ‚ö†Ô∏è  –ò—Å–ø–æ–ª—å–∑—É—é –∫–æ—Å—Ç—ã–ª—å –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞!

**–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è:**
- –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö / —Å–µ—Å—Å–∏–∏ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤
- –ù–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å 15 —Ç–æ–≤–∞—Ä–æ–≤
- –í–∏–¥–∏–º–æ –¥—Ä—É–≥–∞—è —Å–µ—Å—Å–∏—è/–±—Ä–∞—É–∑–µ—Ä

---

## üîß –ú–û–ò –ö–û–°–¢–´–õ–ò (–ß–¢–û –ù–£–ñ–ù–û –£–ë–†–ê–¢–¨/–ò–°–ü–†–ê–í–ò–¢–¨)

### 1. `ecopackpro-mobile-cart-bridge.php`
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –º–æ–∏ JS/CSS —Ñ–∞–π–ª—ã  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ—Å—Ç—ã–ª–∏  
**–†–µ—à–µ–Ω–∏–µ:** –û–¢–ö–õ–Æ–ß–ò–¢–¨ –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –¢–û–õ–¨–ö–û WebView API

### 2. `fix-all-cart-issues.css`
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–∫—Ä—ã–≤–∞–µ—Ç `.w-cart-quantity` –≤ mobile footer
- –°—Ç–∏–ª–∏–∑—É–µ—Ç `.mobile-cart-badge`
- –ò–∑–º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç –Ω–∞ –∑–µ–ª—ë–Ω—ã–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
```css
.l-subheader.at_bottom .w-cart-quantity {
    display: none !important;  ‚Üê –ë–õ–û–ö–ò–†–£–ï–¢ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π badge!
}
```

**–†–µ—à–µ–Ω–∏–µ:** –£–ë–†–ê–¢–¨ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å–∫—Ä—ã–≤–∞—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã!

### 3. `mobile-cart-badge-v3-green.js`
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –°–æ–∑–¥–∞—ë—Ç `.mobile-cart-badge` –≤ mobile footer  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–û–°–¢–´–õ–¨! –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ badge —Ç–∞–º –ù–ï–¢!  
**–†–µ—à–µ–Ω–∏–µ:** –û–¢–ö–õ–Æ–ß–ò–¢–¨ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º

### 4. `restore-native-woocommerce-cart.php`
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- Dequeue `cart-counter-fix.js` (—Å–∫—Ä–∏–ø—Ç —Ç–µ–º—ã!)
- –î–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–π inline —Å–∫—Ä–∏–ø—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç–∫–ª—é—á–∏–ª –°–¢–ê–ù–î–ê–†–¢–ù–´–ô —Å–∫—Ä–∏–ø—Ç —Ç–µ–º—ã!  
**–†–µ—à–µ–Ω–∏–µ:** –í–ï–†–ù–£–¢–¨ `cart-counter-fix.js`!

### 5. `footer.php` (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª inline —Å–∫—Ä–∏–ø—Ç)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–æ–∑–º–æ–∂–Ω–æ —Ç–∞–º –±—ã–ª –ù–£–ñ–ù–´–ô –∫–æ–¥!  
**–†–µ—à–µ–Ω–∏–µ:** –í–ï–†–ù–£–¢–¨ –∫–∞–∫ –±—ã–ª–æ!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (–ü–û–®–ê–ì–û–í–´–ô –ü–õ–ê–ù)

### –®–ê–ì 1: –ë–≠–ö–ê–ü –¢–ï–ö–£–©–ï–ì–û –°–û–°–¢–û–Ø–ù–ò–Ø
```bash
cp /var/www/fastuser/data/www/ecopackpro.ru/wp-content/mu-plugins/ecopackpro-mobile-cart-bridge.php \
   /var/www/fastuser/data/www/ecopackpro.ru/wp-content/mu-plugins/ecopackpro-mobile-cart-bridge.php.BACKUP-BEFORE-RESTORE

cp /var/www/fastuser/data/www/ecopackpro.ru/wp-content/plugins/us-core/templates/footer.php \
   /var/www/fastuser/data/www/ecopackpro.ru/wp-content/plugins/us-core/templates/footer.php.CURRENT
```

### –®–ê–ì 2: –û–¢–ö–õ–Æ–ß–ò–¢–¨ –ú–û–ò –ö–û–°–¢–´–õ–ò

**–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ .DISABLED:**
```bash
mv /var/www/fastuser/data/www/ecopackpro.ru/wp-content/mu-plugins/ecopackpro-mobile-cart-bridge.php \
   /var/www/fastuser/data/www/ecopackpro.ru/wp-content/mu-plugins/ecopackpro-mobile-cart-bridge.php.DISABLED

mv /var/www/fastuser/data/www/ecopackpro.ru/wp-content/mu-plugins/restore-native-woocommerce-cart.php \
   /var/www/fastuser/data/www/ecopackpro.ru/wp-content/mu-plugins/restore-native-woocommerce-cart.php.DISABLED
```

### –®–ê–ì 3: –í–ï–†–ù–£–¢–¨ –°–¢–ê–ù–î–ê–†–¢–ù–´–ï –°–ö–†–ò–ü–¢–´

**–í–∫–ª—é—á–∏—Ç—å `cart-counter-fix.js`:**
```bash
mv /var/www/fastuser/data/www/ecopackpro.ru/wp-content/themes/Impreza/cart-counter-fix.js.DISABLED-20251030 \
   /var/www/fastuser/data/www/ecopackpro.ru/wp-content/themes/Impreza/cart-counter-fix.js
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `footer.php`:**
- –ù–∞–π—Ç–∏ backup: `footer.php.backup-20251030_122218`
- –í–µ—Ä–Ω—É—Ç—å inline —Å–∫—Ä–∏–ø—Ç

### –®–ê–ì 4: –û–ß–ò–°–¢–ò–¢–¨ –í–°–ï –ö–ï–®–ò
```bash
redis-cli FLUSHALL
rm -rf /var/cache/nginx/microcache/*
sudo -u www-data wp cache flush
systemctl reload nginx
```

### –®–ê–ì 5: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

**Desktop:**
1. –û—Ç–∫—Ä—ã—Ç—å https://ecopackpro.ru/
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
3. ‚úÖ Badge –≤ header –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

**Mobile:**
1. –û—Ç–∫—Ä—ã—Ç—å https://ecopackpro.ru/ (–º–æ–±–∏–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä)
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–ï–†–•–ù–ï–ï –º–µ–Ω—é
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ù–ò–ñ–ù–Æ–Æ –ø–∞–Ω–µ–ª—å (–µ—Å–ª–∏ –µ—Å—Ç—å badge)

### –®–ê–ì 6: –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢

**–ê–Ω–∞–ª–∏–∑:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å console.log –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `sessionStorage['wc_fragments']`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è `wc_fragments_refreshed`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `cart-fragments.js` –∑–∞–≥—Ä—É–∂–µ–Ω

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ë–ï–ó –∫–æ—Å—Ç—ã–ª–µ–π!
- –ò—Å–ø–æ–ª—å–∑—É—è WooCommerce hooks –∏ filters

---

## üîç –ß–¢–û –ü–†–û–í–ï–†–ò–¢–¨ –í –ë–†–ê–£–ó–ï–†–ï

### Console commands:

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
JSON.parse(sessionStorage.getItem('wc_fragments'))

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ cookie
document.cookie.split(';').filter(c => c.includes('cart'))

// 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ badge —ç–ª–µ–º–µ–Ω—Ç–∞
document.querySelector('.w-cart-quantity')

// 4. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
jQuery(document.body).trigger('wc_fragment_refresh')

// 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
typeof wc_cart_fragments_params
```

---

## üì± –°–¢–ê–ù–î–ê–†–¢–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ –¢–ï–ú–´ IMPREZA

### Desktop/Mobile Header:
```html
<div class="w-cart dropdown_mdesign ush_cart_1">
  <div class="w-cart-h">
    <a class="w-cart-link" href="/cart/">
      <span class="w-cart-icon">
        <i class="far fa-shopping-cart"></i>
      </span>
      <span class="w-cart-quantity">15</span> ‚Üê –°–¢–ê–ù–î–ê–†–¢–ù–´–ô BADGE
    </a>
  </div>
</div>
```

### Mobile Footer:
```html
<div class="l-subheader at_bottom">
  <div class="w-text ush_text_8">
    <a href="/cart/">
      <span class="w-text-value">–ö–æ—Ä–∑–∏–Ω–∞</span>
      <!-- –ù–ï–¢ –°–¢–ê–ù–î–ê–†–¢–ù–û–ì–û BADGE! -->
    </a>
  </div>
</div>
```

**–í—ã–≤–æ–¥:** –í mobile footer –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ù–ï–¢ badge! –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!

---

## üéØ –ò–¢–û–ì–û–í–´–ô –ü–õ–ê–ù

1. ‚úÖ **–û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –º–æ–∏ –∫–æ—Å—Ç—ã–ª–∏**
2. ‚úÖ **–í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–º—ã**
3. ‚úÖ **–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à–∏**
4. üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏**
5. üîß **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
6. üì∏ **–°–∫—Ä–∏–Ω—à–æ—Ç—ã –í–°–ï–• –º–µ–Ω—é**
7. üìÑ **–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç**

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ!**

