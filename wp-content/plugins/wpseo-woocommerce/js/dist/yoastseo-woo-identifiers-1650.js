(()=>{"use strict";const t=window.wp.hooks,e=window.lodash,i=["gtin8","gtin12","gtin13","gtin14","isbn","mpn"];let n=!0,o=!0,r=[];function a(t){return""!==t.sku}function s(t){return!!(t.productIdentifiers.gtin8||t.productIdentifiers.gtin12||t.productIdentifiers.gtin13||t.productIdentifiers.gtin14||t.productIdentifiers.isbn||t.productIdentifiers.mpn)}function u(t){return t.length>=1}function d(t){return t.every((t=>t.sku))}function c(t){return{id:t,sku:wpseoWooSKU.variations[t],productIdentifiers:wpseoWooIdentifiers.variations[t]}}function p(t){const e=[];return t.forEach((t=>{null===t?e.push(""):e.push(t.value)})),{gtin8:e[0].trim(),gtin12:e[1].trim(),gtin13:e[2].trim(),gtin14:e[3].trim(),isbn:e[4].trim(),mpn:e[5].trim()}}function l(t){const e=t.querySelector("input.variable_post_id").value,i=t.querySelector("input[id^=variable_sku]");let r="";i?r=i.value:n=!1;const a=[`#yoast_variation_identifier\\[${e}\\]\\[gtin8\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin12\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin13\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin14\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin14\\]`,`#yoast_variation_identifier\\[${e}\\]\\[mpn\\]`].map((e=>t.querySelector(e)));return a.some((t=>null===t))&&(o=!1),{id:e,sku:r.trim(),productIdentifiers:p(a)}}function f(t){const i={...t};i.hasOwnProperty("customData")||(i.customData={});const f=function(){let t=!0,e=!0,i="";const n=document.querySelector("input#_sku");n?i=n.value:t=!1;const o=["yoast_identifier_gtin8","yoast_identifier_gtin12","yoast_identifier_gtin13","yoast_identifier_gtin14","yoast_identifier_isbn","yoast_identifier_mpn"].map((t=>document.getElementById(t)));o.some((t=>null===t))&&(e=!1);const r=document.querySelector("select#product-type").value,a={canRetrieveGlobalSku:t,canRetrieveAllIdentifiers:e,sku:i.trim(),productType:r,productIdentifiers:p(o)};return Object.assign({},{sku:wpseoWooSKU.global_sku,productIdentifiers:wpseoWooIdentifiers.global_identifier_values},a)}(),m=function(t){const i=document.querySelector(".woocommerce_variations");if(0===t.length&&i){if(i.getAttribute("data-total")>0)return Object.keys(wpseoWooIdentifiers.variations).map(c);r=[]}else r=t<r?t:(0,e.uniqBy)([...t,...r,...Object.keys(wpseoWooIdentifiers.variations).map(c)],(t=>t.id));return r}([...document.querySelectorAll(".woocommerce_variation")].map(l)),_=s(f),y=function(t){return t.every(s)}(m),v=_||!_&&!0===f.canRetrieveAllIdentifiers,g=y||!y&&!0===o;return i.customData=Object.assign(i.customData,{canRetrieveGlobalIdentifier:v,canRetrieveVariantIdentifiers:g,canRetrieveGlobalSku:f.canRetrieveGlobalSku,canRetrieveVariantSkus:n,productType:f.productType,hasGlobalIdentifier:_,hasVariants:u(m),doAllVariantsHaveIdentifier:y,hasGlobalSKU:a(f),doAllVariantsHaveSKU:d(m)}),i}function m(){(0,t.addFilter)("yoast.analysis.data","wpseo-woocommerce-identifier-data",f),function(){i.forEach((t=>{const e=document.getElementById(`yoast_identifier_${t}`);e&&e.addEventListener("input",YoastSEO.app.refresh)}));const t=document.getElementById("_sku");t&&t.addEventListener("input",YoastSEO.app.refresh);const e=document.querySelector("select#product-type");e&&e.addEventListener("change",YoastSEO.app.refresh);const o=new MutationObserver(YoastSEO.app.refresh),r=document.getElementById("variable_product_options");r&&o.observe(r,{childList:!0,subtree:!0,attributes:!0}),jQuery(document.body).on("input","#variable_product_options .woocommerce_variations :input[id^=yoast_variation_identifier]",YoastSEO.app.refresh),n&&jQuery(document.body).on("input","#variable_product_options .woocommerce_variations :input[id^=variable_sku]",YoastSEO.app.refresh)}()}"undefined"==typeof YoastSEO||void 0===YoastSEO.app?jQuery(window).on("YoastSEO:ready",(function(){m()})):m()})();